{% extends "base.html" %}

{% block title %}OAuth login{% endblock %}

{% block head %}
  {{ super() }}
  <script type="text/javascript" src="//www.gstatic.com/authtoolkit/js/gitkit.js">
  </script>
  <link type="text/css" rel="stylesheet"
    href="//www.gstatic.com/authtoolkit/css/gitkit.css" />
  <script type="text/javascript">
    var config = {
        apiKey: '{{ BROWSER_API_KEY }}',
        signInSuccessUrl: '/',
        idps: ["google"],
        oobActionUrl: '/',
        siteName: 'Robot web server'
    };
    // The HTTP POST body should be escaped by the server to prevent XSS
    window.google.identitytoolkit.start(
        '#gitkitWidgetDiv', // accepts any CSS selector
        config,
        'JAVASCRIPT_ESCAPED_POST_BODY');
  </script>
{% endblock %}

{% block body %}
  <body>
    <div id="gitkitWidgetDiv"></div>
  </body>
{% endblock %}
